<?xml version="1.0" encoding="utf-8" ?>
<XML>
  <QUDMMS_DB>
    <!--[QUDMMS]-InstructorMS-->
    <SQL_zq61H4SJdL>
      SELECT COUNT(*) AS pageSum
      FROM `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`
      @dynamic_condition;
    </SQL_zq61H4SJdL>

    <SQL_U83Eb0bl4Q>
      SELECT `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`.`instructor_id`,
      `QUDM_TAMS_instructorInfo`.`title`,
      `QUDM_TAMS_instructorInfo`.`first_name`,
      `QUDM_TAMS_instructorInfo`.`last_name`,
      `QUDM_TAMS_instructorInfo`.`email`
      FROM `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`
      @dynamic_condition
      ORDER BY `QUDM_TAMS_instructorInfo`.`last_name` DESC
      LIMIT @page_number , 10;
    </SQL_U83Eb0bl4Q>

    <SQL_gdUg2TfBXJ>
      INSERT INTO `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`(
      `instructor_id`,
      `title`,
      `first_name`,
      `last_name`,
      `email`,
      `years_exp`,
      `current_FTE`,
      `instructor_status`,
      `c_working_status`,
      `available_term`,
      `teaching_load`,
      `admin_load`,
      `cfwd_total`,
      `total_load`
      )VALUE(
      @instructor_id,
      @title,
      @first_name,
      @last_name,
      @email,
      @years_exp,
      @current_FTE,
      @instructor_status,
      @c_working_status,
      @available_term,
      @teaching_load,
      @admin_load,
      @cfwd_load,
      @total_load);
    </SQL_gdUg2TfBXJ>

    <SQL_XaFayq70bN>
      INSERT INTO `QUDMMS_DB`.`QUDM_TAMS_insrtuctorTeachingHistory`
      (
      `course_code`,
      `course_title`,
      `instructor_id`,
      `teaching_year`,
      `section_number`)
      VALUES
      (
      @course_code,
      @course_title,
      @instructor_id,
      @teaching_year,
      @section_number
      );
    </SQL_XaFayq70bN>

    <SQL_Hy8e8CCYuJ>
      SELECT
      `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`.`instructor_id`,
      `first_name`,
      `last_name`,
      `title`,
      `email`,
      `instructor_status`,
      `current_FTE`,
      `years_exp`,
      `c_working_status`,
      `available_term`,
      `teaching_load`,
      `admin_load`,
      `cfwd_load`,
      `total_load`
      FROM
      `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`
      WHERE
      `instructor_id`=@instructor_id;
    </SQL_Hy8e8CCYuJ>

    <SQL_abyki3T37e>
      SELECT `QUDM_TAMS_insrtuctorTeachingHistory`.`teachingHistory_id`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`course_code`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`course_title`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`instructor_id`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`teaching_year`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`section_number`
      FROM `QUDMMS_DB`.`QUDM_TAMS_insrtuctorTeachingHistory`;
    </SQL_abyki3T37e>

    <SQL_E6W9vT3JdU>
      UPDATE `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`
      SET
      `instructor_id` = @instructor_id,
      `title` = @title,
      `first_name` = @first_name,
      `last_name` = @last_name,
      `email` = @email,
      `current_FTE` = @current_FTE,
      `instructor_status` = @instructor_status,
      `years_exp` = @years_exp,
      `c_working_status` = @c_working_status,
      `available_term` = @available_term,
      `teaching_load` = @teaching_load,
      `admin_load` = @admin_load,
      `cfwd_load` = @cfwd_load,
      `total_load` = @total_load
      WHERE `instructor_id` = @instructor_id;
    </SQL_E6W9vT3JdU>

    <SQL_b2nuUdjHBS>
      UPDATE `QUDMMS_DB`.`QUDM_TAMS_insrtuctorTeachingHistory`
      SET
      `course_code` = @course_code,
      `course_title` = @course_title,
      `instructor_id` = @instructor_id,
      `teaching_year` = @teaching_year,
      `section_number` = @section_number
      WHERE `instructor_id` = @instructor_id;
    </SQL_b2nuUdjHBS>

    <SQL_2fufaYyDsT>
      DELETE FROM `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`
      WHERE `instructor_id` = @instructor_id;
    </SQL_2fufaYyDsT>

    <SQL_hVy4fa7F1I>
      SELECT
      `first_name`,
      `last_name`
      FROM `QUDMMS_DB`.`QUDM_TAMS_instructorInfo`
      WHERE 1=1;
    </SQL_hVy4fa7F1I>

    <SQL_ax4gHdpezv>
      SELECT
      `course_code`
      FROM `QUDMMS_DB`.`QUDM_TAMS_courseInfo`
      WHERE 1=1;
    </SQL_ax4gHdpezv>
    <!--[QUDMMS]-CourseMS-->
    <SQL_8aN4nnYYVz>
      SELECT COUNT(*) AS pageSum
      FROM `QUDMMS_DB`.`QUDM_TAMS_courseInfo`
      @dynamic_condition;
    </SQL_8aN4nnYYVz>
    SELECT COUNT(*) AS pageSum
    FROM `QUDMMS_DB`.`QUDM_TAMS_assignmentSched`
    @dynamic_condition;
    <SQL_yZZSnuIMA4>
      SELECT `QUDMMS_DB`.`QUDM_TAMS_courseInfo`.`course_code`,
      `QUDM_TAMS_courseInfo`.`program`,
      `QUDM_TAMS_courseInfo`.`course_prerequisite`,
      `QUDM_TAMS_courseInfo`.`course_level`,
      `QUDM_TAMS_courseInfo`.`course_title`,
      `QUDM_TAMS_courseInfo`.`course_description`,
      `QUDM_TAMS_courseInfo`.`course_topics`,
      `QUDM_TAMS_courseInfo`.`course_weight`,
      `QUDM_TAMS_courseInfo`.`course_teaching_load`,
      `QUDM_TAMS_courseInfo`.`course_note`,
      `QUDM_TAMS_courseInfo`.`combined_course`
      FROM `QUDMMS_DB`.`QUDM_TAMS_courseInfo`
      @dynamic_condition
      ORDER BY `QUDM_TAMS_courseInfo`.`course_code` DESC
      LIMIT @page_number , 10;
    </SQL_yZZSnuIMA4>

    <SQL_wX7GCRLjmN>
      INSERT INTO `QUDMMS_DB`.`QUDM_TAMS_courseInfo`
      (`course_code`,
      `program`,
      `course_level`,
      `course_title`,
      `course_description`,
      `course_topics`,
      `course_weight`,
      `course_prerequisite`,
      `course_teaching_load`,
      `course_note`,
      `combined_course`)
      VALUES
      (
      @course_code,
      @program,
      @course_level,
      @course_title,
      @course_description,
      @course_topics,
      @course_weight,
      @course_prerequisite,
      @course_teaching_load,
      @course_note,
      @combined_course
      );
    </SQL_wX7GCRLjmN>

    <SQL_YmSO0uis0Y>
      SELECT `QUDMMS_DB`.`QUDM_TAMS_courseInfo`.`course_code`,
      `QUDM_TAMS_courseInfo`.`program`,
      `QUDM_TAMS_courseInfo`.`course_prerequisite`,
      `QUDM_TAMS_courseInfo`.`course_level`,
      `QUDM_TAMS_courseInfo`.`course_title`,
      `QUDM_TAMS_courseInfo`.`course_description`,
      `QUDM_TAMS_courseInfo`.`course_topics`,
      `QUDM_TAMS_courseInfo`.`course_weight`,
      `QUDM_TAMS_courseInfo`.`course_teaching_load`,
      `QUDM_TAMS_courseInfo`.`course_note`,
      `QUDM_TAMS_courseInfo`.`combined_course`
      FROM `QUDMMS_DB`.`QUDM_TAMS_courseInfo`
      WHERE
      `course_code`= @course_code;
    </SQL_YmSO0uis0Y>

    <SQL_274n2jCFPi>
      DELETE FROM `QUDMMS_DB`.`QUDM_TAMS_courseInfo`
      WHERE `course_code` = @course_code;
    </SQL_274n2jCFPi>

    <SQL_UOMyQmL2rw>
      UPDATE `QUDMMS_DB`.`QUDM_TAMS_courseInfo`
      SET
      `course_code` = @course_code,
      `program` = @program,
      `course_prerequisite` = @course_prerequisite,
      `course_level` = @course_level,
      `course_title` = @course_title,
      `course_description` = @course_description,
      `course_topics` = @course_topics,
      `course_weight` = @course_weight,
      `course_teaching_load` =@course_teaching_load,
      `course_note` = @course_note,
      `combined_course` = @combined_course
      WHERE `course_code` = @course_code;
    </SQL_UOMyQmL2rw>

    <!--[QUDMMS]-AssnMS-->

    <SQL_3Y76ML19Mx>
      SELECT COUNT(*) AS pageSum
      FROM `QUDMMS_DB`.`QUDM_TAMS_assignmentSchedule`
      @dynamic_condition;
    </SQL_3Y76ML19Mx>

    <SQL_LfsAIEjVL4>
      SELECT `QUDMMS_DB`.`QUDM_TAMS_assignmentSchedule`.`assn_id`,
      `QUDM_TAMS_assignmentSchedule`.`course_code` AS 'Course Code',
      `QUDM_TAMS_assignmentSchedule`.`assn_year` AS 'Year',
      `QUDM_TAMS_assignmentSchedule`.`instructor_1_id` AS 'Instructor ID',
      `QUDM_TAMS_assignmentSchedule`.`instructor_1_name` AS 'Instructor Name'
      FROM `QUDMMS_DB`.`QUDM_TAMS_assignmentSchedule`
      @dynamic_condition
      ORDER BY `QUDM_TAMS_assignmentSchedule`.`assn_id` DESC
      LIMIT @page_number , 10;
    </SQL_LfsAIEjVL4>

    <SQL_B1TVxNdzqj>
      INSERT INTO `QUDMMS_DB`.`QUDM_TAMS_assignmentSchedule`
      (`course_code`,
      `section_number`,
      `course_title`,
      `assn_year`,
      `assn_term`,
      `course_delivery`,
      `instructor_1_id`,
      `instructor_1_name`,
      `assn_notes`,
      `program`)
      VALUES
      (
      @course_code,
      @section_number,
      @course_title,
      @assn_year,
      @assn_term,
      @course_delivery,
      @instructor_1_id,
      @instructor_1_name,
      @assn_notes,
      @program
      );
      SELECT LAST_INSERT_ID() AS 'assn_id';

    </SQL_B1TVxNdzqj>

    <SQL_I7EwPEEqq7>
      INSERT INTO `QUDMMS_DB`.`QUDM_TAMS_DM_weeklySchedule`
      (`course_code`,
      `section_number`,
      `lecture_day`,
      `teaching_address`,
      `lecture_start_time`,
      `lecture_end_time`,
      `instructor_id`,
      `instructor_name`,
      `shcedule_create_date`,
      `assn_id`,
      `program`)
      VALUES(
      @course_code,
      @section_number,
      @lecture_day,
      @teaching_address,
      @lecture_start_time,
      @lecture_end_time,
      @instructor_id,
      @instructor_name,
      now(),
      @assn_id,
      @program
      );
    </SQL_I7EwPEEqq7>

    <SQL_KVxRK0QXiK>
      SELECT `QUDM_TAMS_assignmentSchedule`.`assn_id`,
      `QUDM_TAMS_assignmentSchedule`.`course_code`,
      `QUDM_TAMS_assignmentSchedule`.`section_number`,
      `QUDM_TAMS_assignmentSchedule`.`course_title`,
      `QUDM_TAMS_assignmentSchedule`.`assn_year`,
      `QUDM_TAMS_assignmentSchedule`.`assn_term`,
      `QUDM_TAMS_assignmentSchedule`.`course_delivery`,
      `QUDM_TAMS_assignmentSchedule`.`instructor_1_id`,
      `QUDM_TAMS_assignmentSchedule`.`instructor_1_name`,
      `QUDM_TAMS_assignmentSchedule`.`assn_notes`
      FROM `QUDMMS_DB`.`QUDM_TAMS_assignmentSchedule`
      WHERE `assn_id` = @assn_id;
    </SQL_KVxRK0QXiK>

    <SQL_9lCwockMTF>
      SELECT `QUDM_TAMS_DM_weeklySchedule`.`lecture_id`,
      `QUDM_TAMS_DM_weeklySchedule`.`course_code`,
      `QUDM_TAMS_DM_weeklySchedule`.`section_number`,
      `QUDM_TAMS_DM_weeklySchedule`.`lecture_day`,
      `QUDM_TAMS_DM_weeklySchedule`.`teaching_address`,
      `QUDM_TAMS_DM_weeklySchedule`.`lecture_start_time`,
      `QUDM_TAMS_DM_weeklySchedule`.`lecture_end_time`
      FROM `QUDMMS_DB`.`QUDM_TAMS_DM_weeklySchedule`
      WHERE `assn_id`= @assn_id;
    </SQL_9lCwockMTF>

    <SQL_sL8HUUUQFg>
      UPDATE `QUDMMS_DB`.`QUDM_TAMS_assignmentSchedule`
      SET
      `course_code` = @course_code,
      `section_number` = @section_number,
      `course_title` = @course_title,
      `assn_year` = @assn_year,
      `assn_term` = @assn_term,
      `course_delivery` = @course_delivery,
      `instructor_1_id` = @instructor_1_id,
      `instructor_1_name` = @instructor_1_name,
      `assn_notes` = @assn_notes,
      `program` =@program
      WHERE `assn_id` = @assn_id;
    </SQL_sL8HUUUQFg>

    <SQL_fPaqQUQ7mK >
      UPDATE `QUDMMS_DB`.`QUDM_TAMS_DM_weeklySchedule`
      SET
      `course_code` = @course_code,
      `section_number` = @section_number,
      `lecture_day` = @lecture_day,
      `teaching_address` = @teaching_address,
      `lecture_start_time` = @lecture_start_time,
      `lecture_end_time` = @lecture_end_time,
      `instructor_id` = @instructor_id,
      `instructor_name` = @instructor_name,
      `program` = @program
      WHERE `assn_id` = @assn_id;
    </SQL_fPaqQUQ7mK>

    <SQL_2ASmH5jDGB>
      DELETE FROM `QUDMMS_DB`.`QUDM_TAMS_assignmentSchedule`
      WHERE `assn_id`= @assn_id;
    </SQL_2ASmH5jDGB>

    <SQL_PIq2W8EV22>
      DELETE FROM `QUDMMS_DB`.`QUDM_TAMS_DM_weeklySchedule`
      WHERE `assn_id`= @assn_id;
    </SQL_PIq2W8EV22>

    <!---->

    <!--[QUDMMS]-UserMs-->
    <SQL_1Dkms3DKvE>
      SELECT COUNT(*) AS pageSum
      FROM `QUDMMS_DB`.`QUDM_RMS_userInfo`
      @dynamic_condition;
    </SQL_1Dkms3DKvE>

    <SQL_9thTSLE1wk>
      SELECT Q.`userNetId`,
      Q.`first_name` ,
      Q.`last_name` ,
      Q.`user_status`,
      W.role_name
      FROM `QUDMMS_DB`.`QUDM_RMS_userInfo` Q
      LEFT JOIN
      (SELECT
      A.`userNetId`, GROUP_CONCAT(C.role_name) AS 'role_name'
      FROM
      `QUDMMS_DB`.`QUDM_RMS_userInfo` A
      LEFT JOIN `QUDMMS_DB`.`QUDM_RMS_userRoleRel` B ON A.userNetId = B.userNetId
      LEFT JOIN `QUDMMS_DB`.`QUDM_RMS_role` C ON B.role_id = C.role_id
      GROUP BY A.`userNetId`) W ON Q.userNetId = W.userNetId
      @dynamic_condition
      ORDER BY Q.`userNetId` DESC
      LIMIT @page_number , 10;
    </SQL_9thTSLE1wk>

    <SQL_JKUH1mDln6>
      INSERT INTO `QUDMMS_DB`.`QUDM_RMS_userInfo`
      (`userNetId`,
      `first_name`,
      `last_name`,
      `login_pw`,
      `register_time`,
      `user_status`)
      VALUES
      (@userNetId,
      @first_name,
      @last_name,
      @login_pw,
      now(),
      @user_status);
    </SQL_JKUH1mDln6>

    <SQL_hFpkFMv4Xo>
      SELECT `QUDM_RMS_role`.`role_id`
      FROM `QUDMMS_DB`.`QUDM_RMS_role`
      WHERE
      `role_name`=@role_name;
    </SQL_hFpkFMv4Xo>

    <SQL_ivKY3cvabw>
      INSERT INTO `QUDMMS_DB`.`QUDM_RMS_userRoleRel`
      (
      `userNetId`,
      `role_id`)
      VALUES
      (
      @userNetId,
      @role_id);
    </SQL_ivKY3cvabw>

    <SQL_KG6aVK5I15>
      SELECT
      Q.`userNetId`,
      Q.`first_name`,
      Q.`last_name`,
      Q.`login_pw`,
      Q.`user_status`,
      W.role_name
      FROM
      `QUDMMS_DB`.`QUDM_RMS_userInfo` Q
      LEFT JOIN
      (SELECT
      A.`userNetId`, GROUP_CONCAT(C.role_name) AS 'role_name'
      FROM
      `QUDMMS_DB`.`QUDM_RMS_userInfo` A
      LEFT JOIN `QUDMMS_DB`.`QUDM_RMS_userRoleRel` B ON A.userNetId = B.userNetId
      LEFT JOIN `QUDMMS_DB`.`QUDM_RMS_role` C ON B.role_id = C.role_id
      GROUP BY A.`userNetId`) W ON Q.userNetId = W.userNetId
      WHERE
      Q.`userNetId` = @userNetId;
    </SQL_KG6aVK5I15>

    <SQL_6ZpTkyYMSB>
      DELETE FROM `QUDMMS_DB`.`QUDM_RMS_userInfo`
      WHERE userNetId = @userNetId;

      DELETE FROM `QUDMMS_DB`.`QUDM_RMS_userRoleRel`
      WHERE userNetId=@userNetId;
    </SQL_6ZpTkyYMSB>

    <SQL_DZWayKi0pb>
      UPDATE `QUDMMS_DB`.`QUDM_RMS_userInfo`
      SET
      `first_name` = @first_name,
      `last_name` = @last_name,
      `login_pw` = @login_pw,
      `user_status` = @user_status
      WHERE `userNetId` = @userNetId;
    </SQL_DZWayKi0pb>

    <SQL_yH9geiA1js>
      SELECT `QUDM_RMS_role`.`role_id`
      FROM `QUDMMS_DB`.`QUDM_RMS_role`
      WHERE
      `role_name`=@role_name;
    </SQL_yH9geiA1js>

    <SQL_Q3BCay6wXV>
      UPDATE `QUDMMS_DB`.`QUDM_RMS_userRoleRel`
      SET
      `role_id` = @role_id
      WHERE `userNetId` = @userNetId;
    </SQL_Q3BCay6wXV>

    <!--[QUDMMS]-Admin-TAMS-InstructorMS-TeachingHistory-->
    <SQL_u14l1pnNns>
      INSERT INTO `QUDMMS_DB`.`QUDM_TAMS_insrtuctorTeachingHistory`
      (
      `course_code`,
      `course_title`,
      `instructor_id`,
      `teaching_year`,
      `section_number`)
      VALUES(
      @course_code,
      @course_title,
      @instructor_id,
      @teaching_year,
      @section_number);
    </SQL_u14l1pnNns>

    <SQL_Hf5r195v6I>
      DELETE FROM `QUDMMS_DB`.`QUDM_TAMS_insrtuctorTeachingHistory`
      WHERE `teachingHistory_id`=@teachingHistory_id;
    </SQL_Hf5r195v6I>

    <SQL_DwW1X7AWfY>
      SELECT COUNT(*) AS pageSum
      FROM `QUDMMS_DB`.`QUDM_TAMS_insrtuctorTeachingHistory`
      WHERE `instructor_id`=@instructor_id
    </SQL_DwW1X7AWfY>

    <SQL_iwPcagxu3I>
      SELECT `QUDM_TAMS_insrtuctorTeachingHistory`.`teachingHistory_id`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`course_code`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`course_title`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`instructor_id`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`teaching_year`,
      `QUDM_TAMS_insrtuctorTeachingHistory`.`section_number`
      FROM `QUDMMS_DB`.`QUDM_TAMS_insrtuctorTeachingHistory`
      WHERE `instructor_id`=@instructor_id
      ORDER BY `QUDM_TAMS_insrtuctorTeachingHistory`.`teachingHistory_id` DESC
      LIMIT @page_number , 10;
    </SQL_iwPcagxu3I>
    <!---->
    <!---->
  </QUDMMS_DB>
</XML>